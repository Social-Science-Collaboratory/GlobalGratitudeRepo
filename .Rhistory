names(m.ic) <- paste(effect_size_columns)
# compute probability > 0
effect_prob <- function(effect_name, reverse = FALSE) {
mean_val <- m.ic[[effect_name]][["b"]]
sd_val <- sqrt(m.ic[[effect_name]][["sigma2"]][[2]])
prob <- pnorm(q = 0, mean = mean_val, sd = sd_val) * 100
if (reverse) prob else 100 - prob
}
# create the table
distribution_results <- data.frame(
outcome = c("PA", "NA", "Optimism", "Life Satisfaction", "Envy", "Indebtedness"),
distribution = c(
effect_prob("pa_effect_size"),
effect_prob("na_effect_size", reverse = TRUE),
effect_prob("optimistic_effect_size"),
effect_prob("ls_effect_size"),
effect_prob("envy_effect_size", reverse = TRUE),
effect_prob("indebted_effect_size")
),
opposite_distribution = c(
effect_prob("pa_effect_size", reverse = TRUE),
effect_prob("na_effect_size"),
effect_prob("optimistic_effect_size", reverse = TRUE),
effect_prob("ls_effect_size", reverse = TRUE),
effect_prob("envy_effect_size"),
effect_prob("indebted_effect_size", reverse = TRUE)
)
)
d.c <- lapply(effect_size_columns, function(effect_size) {
d.c <- df %>%
group_by(country) %>%
summarise(m = mean(.data[[effect_size]]), .groups = "drop") %>%
# add [jittered] y-value
mutate(
y = 0,
y = jitter(y, .1)
) %>%
# labels most extreme observations
mutate(
label = if_else(m == min(m),
true = country,
false = ""
),
label = if_else(m == max(m),
true = country,
false = label
)
) %>%
# include effect size name
mutate(effect_size = effect_size)
return(d.c)
})
d.c <- bind_rows(d.c)
d.c <- d.c %>% select(-y, -label)
# organize effect sizes
mutate_country_results <- d.c %>%
mutate(
is_negative = case_when(
effect_size == "na_effect_size" ~ m > 0,
effect_size == "envy_effect_size" ~ m > 0,
TRUE ~ m < 0
)
)
country_results <- mutate_country_results %>%
group_by(effect_size) %>%
summarise(
opposite_countries_count = sum(is_negative, na.rm = TRUE),
opposite_countries_prop = opposite_countries_count / 34,
countries = str_c(country[is_negative], collapse = "\n"),
.groups = "drop"
) %>%
rename(outcome = effect_size) %>%
mutate(
outcome = recode(
outcome,
"pa_effect_size"         = "PA",
"na_effect_size"         = "NA",
"optimistic_effect_size" = "Optimism",
"ls_effect_size"         = "Life Satisfaction",
"envy_effect_size"       = "Envy",
"indebted_effect_size"   = "Indebtedness"
)
)
print(country_results)
universality_data <- left_join(distribution_results, country_results, by = "outcome")
viz.DF <-
universality_data %>%
# clean factors
mutate(
outcome = factor(outcome,
levels = c(
"PA",
"Optimism",
"NA",
"Indebtedness",
"Life Satisfaction",
"Envy"
),
labels = c(
"Positive affect",
"Optimism",
"Negative affect",
"Indebtedness",
"Life satisfaction",
"Envy"
)
),
countries = str_replace_all(
countries,
"\n",
", "
)
)
fig.3a <-
ggplot(
data = viz.DF,
aes(
y = fct_rev(outcome),
x = opposite_distribution,
label = countries
)
) +
geom_col(
alpha = .5,
fill = "gray30"
) +
geom_text(aes(x = 18),
size = 3,
hjust = 0,
color = "#3C5488"
) +
theme_classic() +
xlim(0, 100) +
xlab("Theory-inconsistent proportion of estimated distribution") +
ylab("Outcome")
fig.3a
# install packages
source("setup.R")
# fetch USA_02b data
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
))
# change the condition column
USA_02b <-
USA_02b %>%
mutate(condition = case_when(
condition == 1 ~ "measure",
condition == 2 ~ "events",
condition == 3 ~ "int.events",
condition == 5 ~ "list",
condition == 6 ~ "letter",
condition == 7 ~ "text",
condition == 8 ~ "hk.list",
condition == 9 ~ "sub",
condition == 11 ~ "god.letter",
TRUE ~ as.character(condition)
))
# change the condition_type column
USA_02b <-
USA_02b %>%
mutate(condition_type = case_when(
condition_type == 1 ~ "control",
condition_type == 2 ~ "intervention",
TRUE ~ as.character(condition_type)
))
# Remove the color columns (results are inaccurate due to survey error)
USA_02b <-
USA_02b %>%
select(-color_task_red_6, -color_task_yellow_1, -color_task_blue_1)
# Save the processed data to CSV
write.csv(USA_02b,
file = here(
"data/raw-data",
"USA_02b_raw_harmonized.csv"
)
)
View(USA_02b)
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
)) %>%
select(-StartDate, -EndDate, -RecordedDate, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
View(USA_02b)
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
)) %>%
select(-StartDate, -EndDate, -RecordedDate, -prolificid, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
View(USA_02b)
# change the condition column
USA_02b <-
USA_02b %>%
mutate(condition = case_when(
condition == 1 ~ "measure",
condition == 2 ~ "events",
condition == 3 ~ "int.events",
condition == 5 ~ "list",
condition == 6 ~ "letter",
condition == 7 ~ "text",
condition == 8 ~ "hk.list",
condition == 9 ~ "sub",
condition == 11 ~ "god.letter",
TRUE ~ as.character(condition)
))
# change the condition_type column
USA_02b <-
USA_02b %>%
mutate(condition_type = case_when(
condition_type == 1 ~ "control",
condition_type == 2 ~ "intervention",
TRUE ~ as.character(condition_type)
))
# Remove the color columns (results are inaccurate due to survey error)
USA_02b <-
USA_02b %>%
select(-color_task_red_6, -color_task_yellow_1, -color_task_blue_1)
# Save the processed data to CSV
write.csv(USA_02b,
file = here(
"data/raw-data",
"USA_02b_raw_harmonized.csv"
)
)
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
)) %>%
select(-StartDate, -EndDate, -RecordedDate, -prolificid, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
)) %>%
select(-StartDate, -EndDate, -RecordedDate, -prolificid, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
)) %>%
select(-StartDate, -EndDate, -RecordedDate, -prolific_id, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
)) %>%
select(-StartDate, -EndDate, -RecordedDate, -prolific_id, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
# Save the data with identifiers removed
write.csv(USA_02b,
file = here(
"data/raw-data",
"USA_02b_raw_harmonized.csv"
)
)
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
)) %>%
select(-StartDate, -EndDate, -RecordedDate, -prolific_id, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
# fetch USA_02b data
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
)) %>%
select(-StartDate, -EndDate, -RecordedDate, -prolific_id, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
# Save the data with identifiers removed
write.csv(USA_02b,
file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
)
)
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
))
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
)) %>%
select(-StartDate, -EndDate, -RecordedDate, -prolific_id, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
data_main <-
readRDS(file = here(
"data/raw-data",
"globalgratitude_final.Rds"
)) %>%
select(StartDate:pageNo) %>%
select(-StartDate, -EndDate, -RecordedDate, -prolific_id, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
data_main <-
readRDS(file = here(
"data/raw-data",
"globalgratitude_final.Rds"
))
View(data_main)
data_main <-
readRDS(file = here(
"data/raw-data",
"globalgratitude_final.Rds"
)) %>%
select(StartDate:pageNo) %>%
select(-StartDate, -EndDate, -RecordedDate, -PROLIFIC_PID, -STUDY_ID, -SESSION_ID)
write_rds(data_main,
file = here(
"data/raw-data",
"globalgratitude_final.Rds"
)
)
data_main <-
readRDS(file = here(
"data/raw-data",
"globalgratitude_final.Rds"
))
View(data_main)
data_USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_harmonized.csv"
) %>%
select(StartDate:pageNo) %>%
rename("events_list" = "control_list"))
data_USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_harmonized.csv"
)
data_USA_02b <-
data_USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_harmonized.csv"
)
data_USA_02b <-
data_USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_harmonized.csv") %>%
select(StartDate:pageNo) %>%
rename("events_list" = "control_list"))
data_USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_harmonized.csv")) %>%
select(StartDate:pageNo) %>%
rename("events_list" = "control_list")
data_USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_harmonized.csv"))
data_USA_02c <-
read.csv(file = here(
"data/raw-data",
"USA_02c.csv"
))
View(data_USA_02c)
data_USA_02c <-
read.csv(file = here(
"data/raw-data",
"USA_02c.csv"
)) %>%
select(StartDate:pageNo) %>%
select(-StartDate, -EndDate, -RecordedDate)
View(data_USA_02c)
# fetch USA_02b data
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
))
# install packages
source("setup.R")
# fetch USA_02b data
USA_02b <-
read.csv(file = here(
"data/raw-data",
"USA_02b_raw_unharmonized.csv"
))
# change the condition column
USA_02b <-
USA_02b %>%
mutate(condition = case_when(
condition == 1 ~ "measure",
condition == 2 ~ "events",
condition == 3 ~ "int.events",
condition == 5 ~ "list",
condition == 6 ~ "letter",
condition == 7 ~ "text",
condition == 8 ~ "hk.list",
condition == 9 ~ "sub",
condition == 11 ~ "god.letter",
TRUE ~ as.character(condition)
))
# change the condition_type column
USA_02b <-
USA_02b %>%
mutate(condition_type = case_when(
condition_type == 1 ~ "control",
condition_type == 2 ~ "intervention",
TRUE ~ as.character(condition_type)
))
# Remove the color columns (results are inaccurate due to survey error)
USA_02b <-
USA_02b %>%
select(-color_task_red_6, -color_task_yellow_1, -color_task_blue_1)
# Save the processed data to CSV
write.csv(USA_02b,
file = here(
"data/raw-data",
"USA_02b_raw_harmonized.csv"
)
)
View(USA_02b)
# fetch main survey data
data_main <-
readRDS(file = here(
"data/raw-data",
"globalgratitude_final.Rds"
)) %>%
select(Status:pageNo)
View(data_main)
data_main <-
readRDS(file = here(
"data/raw-data",
"globalgratitude_final.Rds"
)) %>%
select(Status:pageNo)
View(data_main)
data_main <-
readRDS(file = here(
"data/raw-data",
"globalgratitude_final.Rds"
)) %>%
select(Status:pageNo) %>%
select(-stim_lef_lar_mkn:sibling_inperson, -phone.number, -id, module:completion_code, orientation:subjName, subjName2:kinName)
data_main <-
readRDS(file = here(
"data/raw-data",
"globalgratitude_final.Rds"
)) %>%
select(Status:pageNo) %>%
select(-stim_lef_lar_mkn:sibling_inperson, -phone.number, -id, -module:completion_code, -orientation:subjName, -subjName2:kinName)
View(data_main)
data_main <-
readRDS(file = here(
"data/raw-data",
"globalgratitude_final.Rds"
)) %>%
select(Status:pageNo)
View(data_main)
data_main <-
readRDS(file = here(
"data/raw-data",
"globalgratitude_final.Rds"
)) %>%
select(Status:pageNo) %>%
select(-stim_lef_lar_mkn:sibling_inperson, -phone.number, -id, -module:completion_code, -orientation:subjName, -subjName2:kinName)
View(data_main)
data_main <-
readRDS(file = here("data/raw-data", "globalgratitude_final.Rds")) %>%
select(Status:pageNo) %>%
select(
-stim_lef_lar_mkn:sibling_inperson,
-phone.number,
-id,
-module:completion_code,
-orientation:subjName,
-subjName2:kinName
)
colnames(data_main) %in% c("stim_lef_lar_mkn", "sibling_inperson",
"module", "completion_code",
"orientation", "subjName",
"subjName2", "kinName")
data_main <-
readRDS(file = here("data/raw-data", "globalgratitude_final.Rds")) %>%
select(Status:pageNo)
data_main <- data_main %>%
select(
-stim_lef_lar_mkn:sibling_inperson,
-phone.number,
-id,
-module:completion_code,
-orientation:subjName,
-subjName2:kinName
)
View(data_main)
data_main <- data_main %>%
select(
-stim_lef_sma_mkn:sibling_inperson)
"stim_lef_sma_mkn" %in% colnames(data_main)
"sibling_inperson" %in% colnames(data_main)
cols <- colnames(data_main)
start <- which(cols == "stim_lef_sma_mkn")
end <- which(cols == "sibling_inperson")
cols <- colnames(data_main)
data_main <- data_main %>%
select(-all_of(cols[118:216]))
View(data_main)
View(data_main)
data_main <-
readRDS(file = here("data/raw-data", "globalgratitude_final.Rds")) %>%
select(Status:pageNo)
View(pkg_install_load)
View(data_main)
end <- which(cols == "sibling_inperson")
which(cols == "sibling_inperson")
